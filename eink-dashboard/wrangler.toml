name = "eink-dashboard"
main = "src/index.ts"
compatibility_date = "2024-09-23"

# KV Namespace — after creating, paste your namespace ID below.
# Run: npx wrangler kv namespace create CACHE
# Then replace YOUR_NAMESPACE_ID with the id from the output.
[[kv_namespaces]]
binding = "CACHE"
id = "de97776d35af4df08b13fd2158acebdc"

# Cloudflare Workers AI (image generation + LLM)
[ai]
binding = "AI"

# Cloudflare Images (JPEG→PNG conversion for AI output)
[images]
binding = "IMAGES"

# R2 bucket for birthday reference photos
[[r2_buckets]]
binding = "PHOTOS"
bucket_name = "eink-birthday-photos"

# APOD_API_KEY: store via `wrangler secret put APOD_API_KEY` (never in code)

# Cron schedules:
#   "5 6 * * *"       — daily image warm at 06:05 UTC (after midnight Chicago in both CST/CDT)
#   "5 0,6,12,18 * * *" — headlines + weather every 6h
[triggers]
crons = ["5 6 * * *", "5 0,6,12,18 * * *"]
